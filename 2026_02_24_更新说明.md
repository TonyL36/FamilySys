# 2026年2月24日更新说明

## 1. 更新目标
- 实现 public 与 admin/user 数据库隔离：/family 使用空白库，admin/user 共用正式库
- 统一三套后端服务部署与启动

## 2. 后端数据库隔离
- public 后端数据库：/opt/familysys-public/family.db（空白库）
- admin/user 共享数据库：/opt/familysys-data/family.db
- 数据库选择逻辑按服务工作目录自动分流

## 3. 端口与服务
- public：8002
- admin：8000
- user：8001
- 服务名：familysys-public / familysys-admin / familysys-user

## 4. 部署脚本调整
- deploy_update.ps1 同时上传三套后端 JAR
- deploy_update.ps1 同步 public 空白库与 shared 正式库
- 部署时清理 public 旧库并重启三套服务

## 5. 前端对接
- /family 前端页面统一指向 public 后端端口 8002

## 6. 本次产出文件
- deploy_update.ps1
- family-backend\src\main\java\controller\DatabaseConnection.java
- family-backend-admin\src\main\java\controller\DatabaseConnection.java
- family-backend-user\src\main\java\controller\DatabaseConnection.java
- family-backend\src\main\resources\application.properties
- family-frontend-remote\members2.html
- family-frontend-remote\relationships4.html
- family-frontend-remote\family-tree-final.html
- family-frontend-remote\kinship-network.html
- family-frontend-remote\distant-relative.html
